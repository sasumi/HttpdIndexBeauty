<style>
	.lite-global-switch{position:fixed; bottom:1em; right:1em; width:40px; height:40px;cursor:pointer; opacity:0.5}
	.lite-global-switch .icon{width:100%; height:100%;}
	.lite-global-switch:hover{opacity:1;}
	.lite-global-switch[data-state="off"]{filter:grayscale(1);}
</style>
<style type="text/template" id="style">
	:root{
		--color:#333333;
		--bg-color:#ffffff;
		--link-color:#185dd4;
		--gap:0em;
		--thumb-size:40px;
		--ext-size:12px;
		--top-bar-height:2.5em;
	}
	*{margin:0; padding:0; list-style:none;}
	a{text-decoration:none; color:var(--color)}
	html{font-size:14px; color:var(--color); background-color:#aaaaaa; height:100vh; width:100vw;}

	.btn{display:inline-block; padding:.5em 0; text-align:center; min-width:5em; cursor:pointer;}

	.top-bar{background-color:#eeeeee; border-bottom:1px solid #dddddd; padding:0.5em 1em; min-height:var(--top-bar-height); max-height:var(--top-bar-height); box-sizing:border-box}

	.paths{ font-size:16px; text-shadow:1px 1px 1px white; color:gray}
	.paths a{color:var(--color); opacity:0.75; margin:0 0.15em;}
	.paths a:last-of-type{opacity:1}
	.paths a:hover{color:var(--link-color); opacity:1}
	.paths .icon{width:1.2em; height:1.2em;}
	.paths > *{display:inline-block; vertical-align:middle}

	body{margin:var(--gap); background-color:#ffffff; box-shadow:1px 1px 20px #898585; box-sizing:border-box; overflow:hidden;}

	.file-list{max-height:calc(100vh - var(--gap) * 2 - var(--top-bar-height) - 1em); overflow:auto; --ext:""; padding:0.5em;}
	.file-list li{position:relative;}
	.file-list li a{border-radius:5px; display:block; text-decoration:none; color:#333333; position:relative; border:5px solid transparent}
	.file-list li a:hover{background-color:#eeeeee;}
	.file-list li .title{display:block; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}
	.file-list li .size, .file-list li .last-modified{color:#bbbbbb; zoom:0.9}
	.file-list li .thumb{width:var(--thumb-size); height:var(--thumb-size);}
	.file-list li .thumb img,
	.file-list li .thumb svg{object-fit:scale-down; width:100%; height:100%;}
	.file-list li .thumb img{background-color:#ffffff;}

	.file-list[data-view_mode="tile"] li{margin:.25em; float:left;}
	.file-list[data-view_mode="tile"] a{width:15em; height:2.75em; overflow:hidden; padding-left:calc(var(--thumb-size) + 0.75em);}
	.file-list[data-view_mode="tile"] .thumb{position:absolute; left:0;}
	.file-list[data-view_mode="tile"] .size{margin-left:1em;}

	.file-list[data-view_mode="icon"]{--thumb-size:48px; padding:0.5em;}
	.file-list[data-view_mode="icon"] li{margin:0.25em; float:left;}
	.file-list[data-view_mode="icon"] a{width:6em; height:calc(var(--thumb-size) + 3em); overflow:hidden}
	.file-list[data-view_mode="icon"] .last-modified,
	.file-list[data-view_mode="icon"] .size{display:none;}
	.file-list[data-view_mode="icon"] .title{text-align:center;}
	.file-list[data-view_mode="icon"] .thumb{margin:0 auto 0.5em auto; display:block;}
	.file-list[data-view_mode="icon"] li:before{display:none;}

	.file-list[data-view_mode="list"]{--thumb-size:24px; padding:0.5em;}
	.file-list[data-view_mode="list"] li{margin:0; border-bottom:1px solid #eeeeee}
	.file-list[data-view_mode="list"] li:last-child{border-bottom:none;}
	.file-list[data-view_mode="list"] a{padding:0.5em 0.25em; border-radius:0;}
	.file-list[data-view_mode="list"] li[data-parent] .title{margin-top:0;}
	.file-list[data-view_mode="list"] .last-modified,
	.file-list[data-view_mode="list"] .size{display:inline-block; vertical-align:middle; float:right;}
	.file-list[data-view_mode="list"] .size{text-align:right; margin-right:5em;}
	.file-list[data-view_mode="list"] .title{display:inline-block; vertical-align:middle;}
	.file-list[data-view_mode="list"] .thumb{float:left; margin-right:0.5em;}
	.file-list[data-view_mode="list"] li:before{display:none;}

	.file-list li audio{position:absolute; z-index:2;}

	.file-list [data-type="dir"] .size{display:none;}
	.file-list li[data-ext]:before{content:var(--ext); font-size:var(--ext-size); color:gray; background-color:#eeeeee; z-index:1; opacity:0.8; position:absolute; margin:calc(var(--thumb-size) - var(--ext-size)) 0 0 calc(var(--thumb-size) - var(--ext-size))}
	.file-list [data-parent] .last-modified{display:none;}
	.file-list [data-parent] .title{user-select:none; color:gray; margin-top:.5em;}

	.file-list .highlight{background-color:orange;}

	.operation{position:relative; float:right; margin:-1.5em -0.5em 0 0;}
	.operation .menu{right:0; display:none;}
	.opt-item:hover .menu{display:block;}

	.opt-item{border:1px solid transparent; display:inline-block; width:24px; height:24px; position:relative;}
	.opt-item ~ .opt-item{margin-left:.25em;}
	.opt-item:hover{background:#ffffff; border:1px solid gray; border-radius:3px;}
	.opt-item .icon{width:100%; height:100%; cursor:pointer;}

	.menu{position:absolute; padding:5px 0; z-index:1; box-shadow:1px 1px 40px #cccccc; border:1px solid #cccccc; background-color:#ffffff; border-radius:5px; min-width:12em;}
	.menu > li:hover{background:#eeeeee;}
	.menu > li > label{padding:0.5em 2em; white-space:nowrap; cursor:pointer; display:block;}
	.menu > li > label input[type=radio]{margin-right:0.5em;}
	.menu > .sep{border-top:1px solid #dddddd; margin:0.25em 1em;}
	
	.kw-search-frm{position:fixed; --srch-width:40em; max-width:80vw; top:0.5em; width:var(--srch-width); margin:0 calc(50vw - var(--srch-width) / 2); background-color:#ffffff7a; padding:0.5em; box-sizing:border-box; box-shadow:1px 1px 50px #ababab;}
	.kw-search-frm input[type=search]{display:block; width:100%; box-sizing:border-box; padding:0.5em; font-size:1.1rem; border:none;}
	.kw-search-frm input[type=search]:focus{outline:none;}
</style>
<script>
	const ONE_G = 1024 * 1024 * 1024;
	const ONE_M = 1024 * 1024;
	const ONE_K = 1024;

	const OPT_KEY = 'httpd_index_beauty';
	const OPT_SWITCH_ON = 'on';
	const OPT_SWITCH_OFF = 'off';

	const DEFAULT_SORT_TYPE = 'type';
	const DEFAULT_SORT_DIR = 'asc';

	const DEFAULT_VIEW_MODE = 'tile';

	const VIEW_MODES = {
		icon: '图标',
		tile: '平铺',
		list: '列表'
	};

	const SORT_TYPES = {
		name: '名称',
		date: '日期',
		type: '类型',
		size: '大小'
	};
	const SORT_DIRS = {
		asc: '递增',
		desc: '递减'
	};

	const SORT_ICON_SVG = '<svg t="1703758267072" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1311" width="32" height="32"><path d="M432.00000031 552.00000031L432.00000031 471.99999969 752 471.99999969 752 552.00000031 432.00000031 552.00000031M432.00000031 792.00000031L432.00000031 711.99999969 591.99999969 711.99999969 591.99999969 792.00000031 432.00000031 792.00000031M432.00000031 312.00000031L432.00000031 231.99999969 912.00000031 231.99999969 912.00000031 312.00000031 432.00000031 312.00000031M272 711.99999969L372.00000031 711.99999969 231.99999969 852.00000031 92 711.99999969 192.00000031 711.99999969 192.00000031 312.00000031 92 312.00000031 231.99999969 171.99999969 372.00000031 312.00000031 272 312.00000031 272 711.99999969Z" fill="#707070" p-id="1312"></path></svg>';
	const OPTION_ICON = '<svg t="1703758255561" class="icon" viewBox="0 0 1534 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1072" width="32" height="32"><path d="M1257.0130963 473.16385185H690.4907852c-0.9709037-2.91271111-2.18453333-5.5826963-3.39816297-8.25268148-1.21362963-2.66998518-2.66998518-5.33997037-4.12634074-8.00995555-1.45635555-2.66998518-2.91271111-5.09724445-4.61179259-7.76722964-1.69908148-2.42725925-3.39816297-4.85451852-5.33997037-7.28177777-1.94180741-2.42725925-3.88361482-4.61179259-5.82542223-7.03905186-1.94180741-2.18453333-4.12634075-4.36906667-6.31087407-6.5536-2.18453333-2.18453333-4.61179259-4.12634075-6.79632593-6.06814814-2.42725925-1.94180741-4.85451852-3.64088889-7.28177777-5.33997038-2.42725925-1.69908148-5.09724445-3.39816297-7.76722963-4.85451851l-8.00995556-4.36906667c-2.66998518-1.21362963-5.5826963-2.66998518-8.49540741-3.64088888-2.91271111-1.21362963-5.82542222-2.18453333-8.73813333-3.15543705-2.91271111-0.9709037-5.82542222-1.69908148-8.98085926-2.42725925-2.91271111-0.72817778-6.06814815-1.21362963-8.98085926-1.69908149-3.15543703-0.48545185-6.06814815-0.72817778-9.22358518-0.9709037s-6.06814815-0.24272592-9.2235852-0.24272593-6.06814815 0-9.22358517 0.24272593c-3.15543703 0.24272592-6.06814815 0.48545185-9.22358519 0.9709037-3.15543703 0.48545185-6.06814815 0.9709037-8.98085926 1.69908149-2.91271111 0.72817778-6.06814815 1.45635555-8.98085926 2.42725925-2.91271111 0.9709037-5.82542222 1.94180741-8.73813333 3.15543705-2.91271111 1.21362963-5.5826963 2.42725925-8.49540741 3.64088888-2.66998518 1.21362963-5.33997037 2.66998518-8.00995555 4.36906667-2.66998518 1.45635555-5.09724445 3.15543703-7.76722963 4.85451851-2.42725925 1.69908148-4.85451852 3.64088889-7.28177778 5.33997038-2.42725925 1.94180741-4.61179259 3.88361482-6.79632592 6.06814814-2.18453333 2.18453333-4.36906667 4.12634075-6.31087408 6.5536-1.94180741 2.18453333-3.88361482 4.61179259-5.82542222 7.03905186-1.94180741 2.42725925-3.64088889 4.85451852-5.33997037 7.28177777-1.69908148 2.42725925-3.15543703 5.09724445-4.6117926 7.76722964-1.45635555 2.66998518-2.91271111 5.33997037-4.12634073 8.00995555-1.21362963 2.66998518-2.42725925 5.5826963-3.39816297 8.25268148H297.76023704c-1.21362963 0-2.66998518 0-3.88361481 0.24272593s-2.66998518 0.24272592-3.88361481 0.48545185-2.66998518 0.48545185-3.88361482 0.9709037-2.42725925 0.72817778-3.6408889 1.21362964-2.42725925 0.9709037-3.64088888 1.69908148c-1.21362963 0.48545185-2.18453333 1.21362963-3.39816296 1.9418074-0.9709037 0.72817778-2.18453333 1.45635555-3.15543704 2.18453333-0.9709037 0.72817778-1.94180741 1.69908148-2.91271112 2.66998519-0.9709037 0.9709037-1.69908148 1.94180741-2.66998517 2.91271111-0.72817778 0.9709037-1.69908148 1.94180741-2.42725926 3.15543704-0.72817778 0.9709037-1.45635555 2.18453333-1.94180741 3.15543703-0.72817778 1.21362963-1.21362963 2.18453333-1.69908149 3.39816297-0.48545185 1.21362963-0.9709037 2.42725925-1.21362962 3.64088889-0.48545185 1.21362963-0.72817778 2.42725925-0.97090371 3.64088889-0.24272592 1.21362963-0.48545185 2.42725925-0.48545184 3.88361481-0.24272592 1.21362963-0.24272592 2.42725925-0.24272593 3.88361481s0 2.42725925 0.24272593 3.88361483c0.24272592 1.21362963 0.24272592 2.42725925 0.48545184 3.8836148s0.48545185 2.42725925 0.97090371 3.6408889 0.72817778 2.42725925 1.21362962 3.64088888 0.9709037 2.42725925 1.69908149 3.39816297c0.72817778 1.21362963 1.21362963 2.18453333 1.94180741 3.15543703 0.72817778 0.9709037 1.45635555 2.18453333 2.42725926 3.15543704 0.72817778 0.9709037 1.69908148 1.94180741 2.66998517 2.91271111 0.9709037 0.9709037 1.94180741 1.69908148 2.91271112 2.66998519 0.9709037 0.72817778 1.94180741 1.45635555 3.15543704 2.18453333 0.9709037 0.72817778 2.18453333 1.45635555 3.39816296 1.94180741 1.21362963 0.48545185 2.42725925 1.21362963 3.64088888 1.69908148 1.21362963 0.48545185 2.42725925 0.9709037 3.6408889 1.21362963 1.21362963 0.48545185 2.42725925 0.72817778 3.88361482 0.9709037 1.21362963 0.24272592 2.66998518 0.48545185 3.88361481 0.48545186 1.21362963 0.24272592 2.66998518 0.24272592 3.88361481 0.24272592h166.75271111c0.9709037 2.91271111 2.18453333 5.5826963 3.39816297 8.25268148 1.21362963 2.66998518 2.66998518 5.33997037 4.12634074 8.00995555 1.45635555 2.66998518 2.91271111 5.09724445 4.61179259 7.76722964 1.69908148 2.42725925 3.39816297 4.85451852 5.33997037 7.28177778 1.94180741 2.42725925 3.88361482 4.61179259 5.82542222 7.03905185 1.94180741 2.18453333 4.12634075 4.36906667 6.31087408 6.5536 2.18453333 2.18453333 4.61179259 4.12634075 6.79632592 6.06814815 2.42725925 1.94180741 4.85451852 3.64088889 7.28177778 5.33997037 2.42725925 1.69908148 5.09724445 3.39816297 7.76722963 4.85451851l8.00995555 4.36906667c2.66998518 1.21362963 5.5826963 2.66998518 8.49540742 3.64088889 2.91271111 1.21362963 5.82542222 2.18453333 8.73813333 3.15543703 2.91271111 0.9709037 5.82542222 1.69908148 8.98085925 2.42725926 2.91271111 0.72817778 6.06814815 1.21362963 8.98085927 1.69908149 3.15543703 0.48545185 6.06814815 0.72817778 9.22358518 0.9709037 3.15543703 0.24272592 6.06814815 0.24272592 9.22358519 0.24272593s6.06814815 0 9.22358518-0.24272593c3.15543703-0.24272592 6.06814815-0.48545185 9.22358518-0.9709037 3.15543703-0.48545185 6.06814815-0.9709037 8.98085927-1.69908149 2.91271111-0.72817778 6.06814815-1.45635555 8.98085926-2.42725926 2.91271111-0.9709037 5.82542222-1.94180741 8.73813333-3.15543703 2.91271111-1.21362963 5.5826963-2.42725925 8.49540741-3.64088889 2.66998518-1.21362963 5.33997037-2.66998518 8.00995555-4.36906667 2.66998518-1.45635555 5.09724445-3.15543703 7.76722963-4.85451851 2.42725925-1.69908148 4.85451852-3.64088889 7.28177778-5.33997037 2.42725925-1.94180741 4.61179259-3.88361482 6.79632592-6.06814815 2.18453333-2.18453333 4.36906667-4.12634075 6.31087408-6.5536 1.94180741-2.18453333 3.88361482-4.61179259 5.82542222-7.03905185 1.94180741-2.42725925 3.64088889-4.85451852 5.33997037-7.28177778 1.69908148-2.42725925 3.15543703-5.09724445 4.6117926-7.76722964 1.45635555-2.66998518 2.91271111-5.33997037 4.12634073-8.00995555 1.21362963-2.66998518 2.42725925-5.5826963 3.39816297-8.25268148h566.52231111c1.21362963 0 2.66998518 0 3.88361481-0.24272592s2.66998518-0.24272592 3.88361482-0.48545186 2.66998518-0.48545185 3.88361481-0.9709037 2.42725925-0.72817778 3.6408889-1.21362963 2.42725925-0.9709037 3.64088888-1.69908148c1.21362963-0.48545185 2.18453333-1.21362963 3.39816297-1.94180741 0.9709037-0.72817778 2.18453333-1.45635555 3.15543703-2.18453333 0.9709037-0.72817778 1.94180741-1.69908148 2.91271112-2.66998519 0.9709037-0.9709037 1.69908148-1.94180741 2.66998518-2.91271111 0.72817778-0.9709037 1.69908148-1.94180741 2.42725925-3.15543704 0.72817778-0.9709037 1.45635555-2.18453333 1.94180742-3.15543703 0.72817778-1.21362963 1.21362963-2.18453333 1.69908148-3.39816297 0.48545185-1.21362963 0.9709037-2.42725925 1.21362963-3.64088888 0.48545185-1.21362963 0.72817778-2.42725925 0.9709037-3.6408889 0.24272592-1.21362963 0.48545185-2.42725925 0.48545185-3.8836148 0.24272592-1.21362963 0.24272592-2.42725925 0.24272592-3.88361483 0-1.21362963 0-2.42725925-0.24272592-3.88361481s-0.24272592-2.42725925-0.48545185-3.88361481c-0.24272592-1.21362963-0.48545185-2.42725925-0.9709037-3.64088889s-0.72817778-2.42725925-1.21362963-3.64088889-0.9709037-2.42725925-1.69908148-3.39816297c-0.72817778-1.21362963-1.21362963-2.18453333-1.94180742-3.15543703-0.72817778-0.9709037-1.45635555-2.18453333-2.42725925-3.15543704-0.72817778-0.9709037-1.69908148-1.94180741-2.66998518-2.91271111-0.9709037-0.9709037-1.94180741-1.69908148-2.91271112-2.66998519-0.9709037-0.72817778-1.94180741-1.45635555-3.15543703-2.18453333-0.9709037-0.72817778-2.18453333-1.45635555-3.39816297-1.9418074-1.21362963-0.48545185-2.42725925-1.21362963-3.64088888-1.69908148-1.21362963-0.48545185-2.42725925-0.9709037-3.6408889-1.21362964-1.21362963-0.48545185-2.42725925-0.72817778-3.88361481-0.9709037-1.21362963-0.24272592-2.66998518-0.48545185-3.88361482-0.48545185-1.45635555-0.24272592-2.91271111-0.24272592-4.12634074-0.24272593z m0 310.68918518h-166.7527111c-0.9709037-2.91271111-2.18453333-5.5826963-3.39816297-8.25268148-1.21362963-2.66998518-2.66998518-5.33997037-4.12634074-8.00995555-1.45635555-2.66998518-2.91271111-5.09724445-4.61179259-7.76722963-1.69908148-2.42725925-3.39816297-4.85451852-5.33997037-7.28177778s-3.88361482-4.61179259-5.82542223-7.03905184c-1.94180741-2.18453333-4.12634075-4.36906667-6.31087407-6.5536-2.18453333-2.18453333-4.61179259-4.12634075-6.79632593-6.06814816-2.42725925-1.94180741-4.85451852-3.64088889-7.28177777-5.33997037-2.42725925-1.69908148-5.09724445-3.39816297-7.76722963-4.85451852l-8.00995556-4.36906667c-2.66998518-1.21362963-5.5826963-2.66998518-8.49540741-3.64088888-2.91271111-1.21362963-5.82542222-2.18453333-8.73813333-3.15543704-2.91271111-0.9709037-5.82542222-1.69908148-8.98085926-2.42725926-2.91271111-0.72817778-6.06814815-1.21362963-8.98085926-1.69908148-3.15543703-0.48545185-6.06814815-0.72817778-9.22358518-0.9709037-3.15543703-0.24272592-6.06814815-0.24272592-9.2235852-0.24272592-3.15543703 0-6.06814815 0-9.22358517 0.24272592-3.15543703 0.24272592-6.06814815 0.48545185-9.22358519 0.9709037-3.15543703 0.48545185-6.06814815 0.9709037-8.98085926 1.69908148s-6.06814815 1.45635555-8.98085926 2.42725926c-2.91271111 0.9709037-5.82542222 1.94180741-8.73813333 3.15543704-2.91271111 1.21362963-5.5826963 2.42725925-8.49540741 3.64088888-2.66998518 1.21362963-5.33997037 2.66998518-8.00995555 4.36906667-2.66998518 1.45635555-5.09724445 3.15543703-7.76722963 4.85451852-2.42725925 1.69908148-4.85451852 3.64088889-7.28177778 5.33997037-2.42725925 1.94180741-4.61179259 3.88361482-6.79632592 6.06814816-2.18453333 2.18453333-4.36906667 4.12634075-6.31087408 6.5536-1.94180741 2.18453333-3.88361482 4.61179259-5.82542222 7.03905184s-3.64088889 4.85451852-5.33997037 7.28177778c-1.69908148 2.42725925-3.15543703 5.09724445-4.6117926 7.76722963-1.45635555 2.66998518-2.91271111 5.33997037-4.12634073 8.00995555-1.21362963 2.66998518-2.42725925 5.5826963-3.39816297 8.25268148H297.76023704c-1.21362963 0-2.66998518 0-3.88361481 0.24272594s-2.66998518 0.24272592-3.88361481 0.48545185-2.66998518 0.48545185-3.88361482 0.9709037-2.42725925 0.72817778-3.6408889 1.21362963-2.42725925 0.9709037-3.64088888 1.69908148c-1.21362963 0.48545185-2.18453333 1.21362963-3.39816296 1.9418074-0.9709037 0.72817778-2.18453333 1.45635555-3.15543704 2.18453334-0.9709037 0.72817778-1.94180741 1.69908148-2.91271112 2.66998518-0.9709037 0.9709037-1.69908148 1.94180741-2.66998517 2.91271112-0.72817778 0.9709037-1.69908148 1.94180741-2.42725926 3.15543703-0.72817778 0.9709037-1.45635555 2.18453333-1.94180741 3.15543705-0.72817778 1.21362963-1.21362963 2.18453333-1.69908149 3.39816295-0.48545185 1.21362963-0.9709037 2.42725925-1.21362962 3.64088889-0.48545185 1.21362963-0.72817778 2.42725925-0.97090371 3.64088889s-0.48545185 2.42725925-0.48545184 3.88361482c-0.24272592 1.21362963-0.24272592 2.42725925-0.24272593 3.88361481s0 2.42725925 0.24272593 3.88361481c0.24272592 1.21362963 0.24272592 2.42725925 0.48545184 3.88361483s0.48545185 2.42725925 0.97090371 3.64088888 0.72817778 2.42725925 1.21362962 3.64088889 0.9709037 2.42725925 1.69908149 3.39816296c0.72817778 1.21362963 1.21362963 2.18453333 1.94180741 3.15543704 0.72817778 0.9709037 1.45635555 2.18453333 2.42725926 3.15543703 0.72817778 0.9709037 1.69908148 1.94180741 2.66998517 2.91271112 0.9709037 0.9709037 1.94180741 1.69908148 2.91271112 2.66998518 0.9709037 0.72817778 1.94180741 1.45635555 3.15543704 2.18453333 0.9709037 0.72817778 2.18453333 1.45635555 3.39816296 1.94180741 1.21362963 0.48545185 2.42725925 1.21362963 3.64088888 1.69908149 1.21362963 0.48545185 2.42725925 0.9709037 3.6408889 1.21362962 1.21362963 0.48545185 2.42725925 0.72817778 3.88361482 0.97090371 1.21362963 0.24272592 2.66998518 0.48545185 3.88361481 0.48545184 1.21362963 0.24272592 2.66998518 0.24272592 3.88361481 0.24272593h566.52231111c0.9709037 2.91271111 2.18453333 5.5826963 3.39816297 8.25268149 1.21362963 2.66998518 2.66998518 5.33997037 4.12634074 8.00995555 1.45635555 2.66998518 2.91271111 5.09724445 4.61179259 7.76722963 1.69908148 2.42725925 3.39816297 4.85451852 5.33997037 7.28177778 1.94180741 2.42725925 3.88361482 4.61179259 5.82542222 7.03905185 1.94180741 2.18453333 4.12634075 4.36906667 6.31087408 6.5536 2.18453333 2.18453333 4.61179259 4.12634075 6.79632592 6.06814815 2.42725925 1.94180741 4.85451852 3.64088889 7.28177778 5.33997037 2.42725925 1.69908148 5.09724445 3.39816297 7.76722963 4.85451852l8.00995555 4.36906666c2.66998518 1.21362963 5.5826963 2.66998518 8.49540742 3.6408889 2.91271111 1.21362963 5.82542222 2.18453333 8.73813333 3.15543703 2.91271111 0.9709037 5.82542222 1.69908148 8.98085925 2.42725926 2.91271111 0.72817778 6.06814815 1.21362963 8.98085927 1.69908148 3.15543703 0.48545185 6.06814815 0.72817778 9.22358518 0.9709037 3.15543703 0.24272592 6.06814815 0.24272592 9.22358519 0.24272593 3.15543703 0 6.06814815 0 9.22358518-0.24272593 3.15543703-0.24272592 6.06814815-0.48545185 9.22358518-0.9709037 3.15543703-0.48545185 6.06814815-0.9709037 8.98085927-1.69908148 2.91271111-0.72817778 6.06814815-1.45635555 8.98085926-2.42725926 2.91271111-0.9709037 5.82542222-1.94180741 8.73813333-3.15543703 2.91271111-1.21362963 5.5826963-2.42725925 8.49540741-3.6408889s5.33997037-2.66998518 8.00995555-4.36906666c2.66998518-1.45635555 5.09724445-3.15543703 7.76722963-4.85451852 2.42725925-1.69908148 4.85451852-3.64088889 7.28177778-5.33997037 2.42725925-1.94180741 4.61179259-3.88361482 6.79632592-6.06814815 2.18453333-2.18453333 4.36906667-4.12634075 6.31087408-6.5536 1.94180741-2.18453333 3.88361482-4.61179259 5.82542222-7.03905185 1.94180741-2.42725925 3.64088889-4.85451852 5.33997037-7.28177778 1.69908148-2.42725925 3.15543703-5.09724445 4.6117926-7.76722963 1.45635555-2.66998518 2.91271111-5.33997037 4.12634073-8.00995555 1.21362963-2.66998518 2.42725925-5.5826963 3.39816297-8.25268149h166.75271111c1.21362963 0 2.66998518 0 3.88361481-0.24272593s2.66998518-0.24272592 3.88361482-0.48545184 2.66998518-0.48545185 3.88361481-0.97090371 2.42725925-0.72817778 3.6408889-1.21362962 2.42725925-0.9709037 3.64088888-1.69908149c1.21362963-0.48545185 2.18453333-1.21362963 3.39816297-1.94180741 0.9709037-0.72817778 2.18453333-1.45635555 3.15543703-2.18453333 0.9709037-0.72817778 1.94180741-1.69908148 2.91271112-2.66998518 0.9709037-0.9709037 1.69908148-1.94180741 2.66998518-2.91271112 0.72817778-0.9709037 1.69908148-1.94180741 2.42725925-3.15543703 0.72817778-0.9709037 1.45635555-2.18453333 1.94180742-3.15543704 0.72817778-1.21362963 1.21362963-2.18453333 1.69908148-3.39816296 0.48545185-1.21362963 0.9709037-2.42725925 1.21362963-3.64088889 0.48545185-1.21362963 0.72817778-2.42725925 0.9709037-3.64088888 0.24272592-1.21362963 0.48545185-2.42725925 0.48545185-3.88361483 0.24272592-1.21362963 0.24272592-2.42725925 0.24272592-3.88361481 0-1.21362963 0-2.42725925-0.24272592-3.88361481-0.24272592-1.21362963-0.24272592-2.42725925-0.48545185-3.88361482-0.24272592-1.21362963-0.48545185-2.42725925-0.9709037-3.64088889s-0.72817778-2.42725925-1.21362963-3.64088889-0.9709037-2.42725925-1.69908148-3.39816295c-0.72817778-1.21362963-1.21362963-2.18453333-1.94180742-3.15543705-0.72817778-0.9709037-1.45635555-2.18453333-2.42725925-3.15543703-0.72817778-0.9709037-1.69908148-1.94180741-2.66998518-2.91271112-0.9709037-0.9709037-1.94180741-1.69908148-2.91271112-2.66998518-0.9709037-0.72817778-1.94180741-1.45635555-3.15543703-2.18453334-0.9709037-0.72817778-2.18453333-1.45635555-3.39816297-1.9418074-1.21362963-0.48545185-2.42725925-1.21362963-3.64088888-1.69908148-1.21362963-0.48545185-2.42725925-0.9709037-3.6408889-1.21362963-1.21362963-0.48545185-2.42725925-0.72817778-3.88361481-0.9709037-1.21362963-0.24272592-2.66998518-0.48545185-3.88361482-0.48545185-1.45635555-0.24272592-2.91271111-0.24272592-4.12634074-0.24272594zM297.76023704 240.14696297h566.52231111c0.9709037 2.91271111 2.18453333 5.5826963 3.39816297 8.25268148 1.21362963 2.66998518 2.66998518 5.33997037 4.12634074 8.00995555 1.45635555 2.66998518 2.91271111 5.09724445 4.61179259 7.76722963 1.69908148 2.42725925 3.39816297 4.85451852 5.33997037 7.28177778 1.94180741 2.42725925 3.88361482 4.61179259 5.82542222 7.03905184 1.94180741 2.18453333 4.12634075 4.36906667 6.31087408 6.5536 2.18453333 2.18453333 4.61179259 4.12634075 6.79632592 6.06814816 2.42725925 1.94180741 4.85451852 3.64088889 7.28177778 5.33997037 2.42725925 1.69908148 5.09724445 3.39816297 7.76722963 4.85451852l8.00995555 4.36906667c2.66998518 1.21362963 5.5826963 2.66998518 8.49540742 3.64088888 2.91271111 1.21362963 5.82542222 2.18453333 8.73813333 3.15543704 2.91271111 0.9709037 5.82542222 1.69908148 8.98085925 2.42725926 2.91271111 0.72817778 6.06814815 1.21362963 8.98085927 1.69908148 3.15543703 0.48545185 6.06814815 0.72817778 9.22358518 0.9709037 3.15543703 0.24272592 6.06814815 0.24272592 9.22358519 0.24272592 3.15543703 0 6.06814815 0 9.22358518-0.24272592 3.15543703-0.24272592 6.06814815-0.48545185 9.22358518-0.9709037 3.15543703-0.48545185 6.06814815-0.9709037 8.98085927-1.69908148 2.91271111-0.72817778 6.06814815-1.45635555 8.98085926-2.42725926 2.91271111-0.9709037 5.82542222-1.94180741 8.73813333-3.15543704 2.91271111-1.21362963 5.5826963-2.42725925 8.49540741-3.64088888s5.33997037-2.66998518 8.00995555-4.36906667c2.66998518-1.45635555 5.09724445-3.15543703 7.76722963-4.85451852 2.42725925-1.69908148 4.85451852-3.64088889 7.28177778-5.33997037 2.42725925-1.94180741 4.61179259-3.88361482 6.79632592-6.06814816 2.18453333-2.18453333 4.36906667-4.12634075 6.31087408-6.5536 1.94180741-2.18453333 3.88361482-4.61179259 5.82542222-7.03905184 1.94180741-2.42725925 3.64088889-4.85451852 5.33997037-7.28177778 1.69908148-2.42725925 3.15543703-5.09724445 4.6117926-7.76722963 1.45635555-2.66998518 2.91271111-5.33997037 4.12634073-8.00995555 1.21362963-2.66998518 2.42725925-5.5826963 3.39816297-8.25268148h166.75271111c1.21362963 0 2.66998518 0 3.88361481-0.24272594s2.66998518-0.24272592 3.88361482-0.48545185 2.66998518-0.48545185 3.88361481-0.9709037 2.42725925-0.72817778 3.6408889-1.21362963 2.42725925-0.9709037 3.64088888-1.69908148c1.21362963-0.48545185 2.18453333-1.21362963 3.39816297-1.9418074 0.9709037-0.72817778 2.18453333-1.45635555 3.15543703-2.18453334 0.9709037-0.72817778 1.94180741-1.69908148 2.91271112-2.66998518 0.9709037-0.9709037 1.69908148-1.94180741 2.66998518-2.91271112 0.72817778-0.9709037 1.69908148-1.94180741 2.42725925-3.15543703 0.72817778-0.9709037 1.45635555-2.18453333 1.94180742-3.15543705 0.72817778-1.21362963 1.21362963-2.18453333 1.69908148-3.39816295 0.48545185-1.21362963 0.9709037-2.42725925 1.21362963-3.64088889 0.48545185-1.21362963 0.72817778-2.42725925 0.9709037-3.64088889 0.24272592-1.21362963 0.48545185-2.42725925 0.48545185-3.88361482s0.24272592-2.42725925 0.24272592-3.88361481c0-1.21362963 0-2.42725925-0.24272592-3.88361481-0.24272592-1.21362963-0.24272592-2.42725925-0.48545185-3.88361483-0.24272592-1.21362963-0.48545185-2.42725925-0.9709037-3.64088888s-0.72817778-2.42725925-1.21362963-3.64088889-0.9709037-2.42725925-1.69908148-3.39816296c-0.72817778-1.21362963-1.21362963-2.18453333-1.94180742-3.15543704-0.72817778-0.9709037-1.45635555-2.18453333-2.42725925-3.15543703-0.72817778-0.9709037-1.69908148-1.94180741-2.66998518-2.91271112-0.9709037-0.9709037-1.94180741-1.69908148-2.91271112-2.66998518-0.9709037-0.72817778-1.94180741-1.45635555-3.15543703-2.18453333-0.9709037-0.72817778-2.18453333-1.45635555-3.39816297-1.94180741-1.21362963-0.48545185-2.42725925-1.21362963-3.64088888-1.69908149-1.21362963-0.48545185-2.42725925-0.9709037-3.6408889-1.21362962-1.21362963-0.48545185-2.42725925-0.72817778-3.88361481-0.97090371-1.21362963-0.24272592-2.66998518-0.48545185-3.88361482-0.48545184-1.21362963-0.24272592-2.66998518-0.24272592-3.88361481-0.24272593h-166.75271111c-0.9709037-2.91271111-2.18453333-5.5826963-3.39816297-8.25268149-1.21362963-2.66998518-2.66998518-5.33997037-4.12634073-8.00995555-1.45635555-2.66998518-2.91271111-5.09724445-4.6117926-7.76722963-1.69908148-2.42725925-3.39816297-4.85451852-5.33997037-7.28177778s-3.88361482-4.61179259-5.82542222-7.03905185c-1.94180741-2.18453333-4.12634075-4.36906667-6.31087408-6.5536-2.18453333-2.18453333-4.61179259-4.12634075-6.79632592-6.06814815-2.42725925-1.94180741-4.85451852-3.64088889-7.28177778-5.33997037-2.42725925-1.69908148-5.09724445-3.39816297-7.76722963-4.85451852l-8.00995555-4.36906666c-2.66998518-1.45635555-5.5826963-2.66998518-8.49540741-3.6408889-2.91271111-1.21362963-5.82542222-2.18453333-8.73813333-3.15543703-2.91271111-0.9709037-5.82542222-1.69908148-8.98085926-2.42725926-2.91271111-0.72817778-6.06814815-1.21362963-8.98085927-1.69908148-3.15543703-0.48545185-6.06814815-0.72817778-9.22358518-0.9709037-3.15543703-0.24272592-6.06814815-0.24272592-9.22358518-0.24272593-3.15543703 0-6.06814815 0-9.22358519 0.24272593-3.15543703 0.24272592-6.06814815 0.48545185-9.22358518 0.9709037-3.15543703 0.48545185-6.06814815 0.9709037-8.98085927 1.69908148-2.91271111 0.72817778-6.06814815 1.45635555-8.98085925 2.42725926-2.91271111 0.9709037-5.82542222 1.94180741-8.73813333 3.15543703s-5.5826963 2.42725925-8.49540742 3.6408889c-2.66998518 1.21362963-5.33997037 2.66998518-8.00995555 4.36906666-2.66998518 1.45635555-5.09724445 3.15543703-7.76722963 4.85451852-2.42725925 1.69908148-4.85451852 3.64088889-7.28177778 5.33997037-2.42725925 1.94180741-4.61179259 3.88361482-6.79632592 6.06814815-2.18453333 2.18453333-4.36906667 4.12634075-6.31087408 6.5536-1.94180741 2.18453333-3.88361482 4.61179259-5.82542222 7.03905185s-3.64088889 4.85451852-5.33997037 7.28177778c-1.69908148 2.42725925-3.15543703 5.09724445-4.61179259 7.76722963-1.45635555 2.66998518-2.91271111 5.33997037-4.12634074 8.00995555-1.21362963 2.66998518-2.42725925 5.5826963-3.39816297 8.25268149H297.76023704c-1.21362963 0-2.66998518 0-3.88361481 0.24272593s-2.66998518 0.24272592-3.88361481 0.48545184-2.66998518 0.48545185-3.88361482 0.97090371-2.42725925 0.72817778-3.6408889 1.21362962-2.42725925 0.9709037-3.64088888 1.69908149c-1.21362963 0.48545185-2.18453333 1.21362963-3.39816296 1.94180741s-2.18453333 1.45635555-3.15543704 2.18453333c-0.9709037 0.72817778-1.94180741 1.69908148-2.91271112 2.66998518-0.9709037 0.9709037-1.69908148 1.94180741-2.66998517 2.91271112-0.72817778 0.9709037-1.69908148 1.94180741-2.42725926 3.15543703-0.72817778 0.9709037-1.45635555 2.18453333-1.94180741 3.15543704-0.72817778 1.21362963-1.21362963 2.18453333-1.69908149 3.39816296-0.48545185 1.21362963-0.9709037 2.42725925-1.21362962 3.64088889-0.48545185 1.21362963-0.72817778 2.42725925-0.97090371 3.64088888s-0.48545185 2.42725925-0.48545184 3.88361483c-0.24272592 1.21362963-0.24272592 2.42725925-0.24272593 3.88361481 0 1.21362963 0 2.42725925 0.24272593 3.88361481 0.24272592 1.21362963 0.24272592 2.42725925 0.48545184 3.88361482s0.48545185 2.42725925 0.97090371 3.64088889 0.72817778 2.42725925 1.21362962 3.64088889 0.9709037 2.42725925 1.69908149 3.39816295c0.72817778 1.21362963 1.21362963 2.18453333 1.94180741 3.15543705 0.72817778 0.9709037 1.45635555 2.18453333 2.42725926 3.15543703 0.72817778 0.9709037 1.69908148 1.94180741 2.66998517 2.91271112 0.9709037 0.9709037 1.94180741 1.69908148 2.91271112 2.66998518 0.9709037 0.72817778 1.94180741 1.45635555 3.15543704 2.18453334 0.9709037 0.72817778 2.18453333 1.45635555 3.39816296 1.9418074 1.21362963 0.48545185 2.42725925 1.21362963 3.64088888 1.69908148 1.21362963 0.48545185 2.42725925 0.9709037 3.6408889 1.21362963 1.21362963 0.48545185 2.42725925 0.72817778 3.88361482 0.9709037 1.21362963 0.24272592 2.66998518 0.48545185 3.88361481 0.48545185 1.21362963 0.24272592 2.66998518 0.24272592 3.88361481 0.24272594z" fill="#707070" p-id="1073"></path></svg>';
	const TRANSPARENT_IMG_BG = '<svg t="1703298943448" viewBox="0 0 1975 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5993" width="200" height="200"><path d="M871.429328-0.000524h164.781109v164.781108H871.429328v-164.781108z m-341.331585 0h164.78006v164.781108h-164.78006v-164.781108z m-341.332634 0h164.781109v164.781108H188.765109v-164.781108z m506.112694 176.551h164.781633v164.780585h-164.781633v-164.780585z m-341.331585 0h164.781633v164.780585H353.546218v-164.780585z m-341.331061 0h164.78006v164.780585H12.215157v-164.780585zM871.429328 341.331061h164.781109v164.781109H871.429328V341.331061z m-341.331585 0h164.78006v164.781109h-164.78006V341.331061z m-341.332634 0h164.781109v164.781109H188.765109V341.331061z m506.112694 176.551h164.781633v164.781109h-164.781633V517.882061z m-341.331585 0h164.781633v164.781109H353.546218V517.882061z m-341.331061 0h164.78006v164.781109H12.215157V517.882061zM871.429328 682.66317h164.781109v164.780585H871.429328V682.66317z m-341.331585 0h164.78006v164.780585h-164.78006V682.66317z m-341.332634 0h164.781109v164.780585H188.765109V682.66317z m506.112694 176.550477h164.781633v164.781108h-164.781633v-164.781108z m-341.331585 0h164.781633v164.781108H353.546218v-164.781108z m-341.331061 0h164.78006v164.781108H12.215157v-164.781108z" fill="#cdcdcd" p-id="5994"></path></svg>';
	const HOME_ICON = '<svg t="1703210335547" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="16796" width="200" height="200"><path d="M946.5 505L560.1 118.8l-25.9-25.9c-12.3-12.2-32.1-12.2-44.4 0L77.5 505c-12.3 12.3-18.9 28.6-18.8 46 0.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8 12.1-12.1 18.7-28.2 18.7-45.3 0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204z m217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z" p-id="16797" fill="#707070"></path></svg>';
	const FOLD_SVG = '<svg t="1703145101119" class="icon" viewBox="0 0 1194 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6587" width="200" height="200"><path d="M1090.17345393 277.75145411H83.33333333V133.91715166a71.91715166 71.91715166 0 0 1 71.91715166-71.91715166h251.71002949l143.83430332 143.83430332H1018.25630228a71.91715166 71.91715166 0 0 1 71.91715165 71.91715078z" p-id="6588" fill="#8a8a8a"></path><path d="M83.33333333 349.66860576m71.91715166 0l863.00581729 0q71.91715166 0 71.91715165 71.91715166l0 431.50290821q0 71.91715166-71.91715165 71.91715166l-863.00581729 0q-71.91715166 0-71.91715166-71.91715166l0-431.50290821q0-71.91715166 71.91715166-71.91715166Z" p-id="6589" fill="#8a8a8a"></path></svg>';
	const FILE_SVG = '<svg t="1703144775181" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6412" width="200" height="200"><path d="M257.49387688 75.70378895C197.5758639 75.70378895 148.41982411 124.85982871 148.41982411 184.7778417v654.4443166c0 59.91801299 49.15603978 109.07405276 109.07405277 109.07405275h509.01224624c59.91801299 0 109.07405276-49.15603978 109.07405277-109.07405275V315.15769278L636.12627204 75.70378895z m0 72.71603516H584.71603518v218.14810554h218.14810553v472.65422865c0 20.43320588-15.9248117 36.35801759-36.35801759 36.35801759h-509.01224624a35.92172138 35.92172138 0 0 1-36.35801759-36.35801759v-654.4443166c0-20.43320588 15.9248117-36.35801759 36.35801759-36.35801759z m399.93819347 51.41023688L751.45390383 293.85189446H657.43207035z" fill="#707070" p-id="6413"></path></svg>';
	const FOLD_PARENT = '<svg t="1703168274004" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8086" width="200" height="200"><path d="M0 0h1024v1024H0V0z" fill="#8a8a8a" opacity=".01" p-id="8087"></path><path d="M463.735467 122.402133a68.266667 68.266667 0 0 1 96.529066 0l307.2 307.2a68.266667 68.266667 0 1 1-96.529066 96.529067L580.266667 335.4624V853.333333a68.266667 68.266667 0 1 1-136.533334 0V335.4624l-190.6688 190.6688a68.266667 68.266667 0 1 1-96.529066-96.529067l307.2-307.2z" fill="#8a8a8a" p-id="8088"></path></svg>';

	const isDir = fileAttr => {
		return fileAttr && fileAttr.trim() === '-';
	}

	/**
	 * @param selector
	 * @return {HTMLElement}
	 */
	const q = (selector) => {
		return document.querySelector(selector);
	}

	const qs = selector => {
		return document.querySelectorAll(selector);
	}

	const isImg = fileName => {
		return /\.(jpg|jpeg|webp|gif|png|svg)$/ig.test(fileName);
	}

	const isIndex = () => {
		return document.title.indexOf('Index of') === 0 && q('h1') && q('pre') && q('hr');
	}

	const dateFormat = datetime => {
		let d = new Date(datetime);
		return d.getFullYear()
			+ '/' + (d.getMonth() + 1).toString().padStart(2, '0')
			+ '/' + (d.getDate()).toString().padStart(2, '0')
			+ ' '
			+ (d.getHours()).toString().padStart(2, '0')
			+ ':' + (d.getMinutes()).toString().padStart(2, '0');
	}

	const keyVisible = code => {
		return (code >= 48 && code <= 57) //num
			|| (code >= 65 && code <= 90) //a-z
			|| code >= 96 && code <= 105 //numpad
			|| (code >= 186 && code <= 222) //symbol
			|| code === 111 // /
	}

	const convertSize = sizeText => {
		let num = parseInt(sizeText, 10);
		if(sizeText.includes('G')){
			return num * ONE_G;
		}else if(sizeText.includes('M')){
			return num * ONE_M;
		}else if(sizeText.includes('K')){
			return num * ONE_K;
		}
		return num;
	}

	const resolveExt = name => {
		let tmp = name.split('.');
		if(tmp.length > 1){
			return tmp[tmp.length - 1] || '';
		}
		return '';
	}

	const buildPathLink = (linkText) => {
		let html = [
			`<a href="/" class="home-link">${HOME_ICON}</a>`
		];
		let current_path = '';
		let segs = linkText.split('/');
		segs.forEach(seg => {
			if(seg.length === 0){
				return;
			}
			current_path += '/' + seg;
			html.push(`<a href="${current_path}">${seg}</a>`);
		});
		return html.join('<span class="sep">&gt;</span>');
	}

	const rm = n => {
		return n.parentNode.removeChild(n);
	}

	const createNode = (html, parentNode) => {
		let tpl = document.createElement('template');
		html = html.trim();
		tpl.innerHTML = html;
		let nodes = [];
		if(parentNode){
			tpl.content.childNodes.forEach(node => {
				nodes.push(parentNode.appendChild(node));
			})
		}else{
			nodes = tpl.content.childNodes;
		}
		return nodes.length === 1 ? nodes[0] : nodes;
	}
	const regQuote = (str) => {
		return (str + '').replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g, "\\$1");
	}

	const getOpt = () => {
		let optSavedStr = window.localStorage.getItem(OPT_KEY);
		return optSavedStr ? JSON.parse(optSavedStr) : {
			view_mode: DEFAULT_VIEW_MODE,
			sort_type: DEFAULT_SORT_TYPE,
			sort_dir: DEFAULT_SORT_DIR,
			global_switch: OPT_SWITCH_ON
		};
	}

	const setOpt = (key, val) => {
		let opts = getOpt();
		opts[key] = val;
		window.localStorage.setItem(OPT_KEY, JSON.stringify(opts));
	}

	const highlightText = (text, kw, replaceTpl = '<span class="highlight">%s</span>') => {
		let matched = false;
		if(!kw){
			return [text, false];
		}
		let html = text.replace(new RegExp(regQuote(kw), 'ig'), match => {
			matched = true;
			return replaceTpl.replace('%s', match);
		});
		return [html, matched];
	};

	const swap = (item1, item2, dir) => {
		return dir === 'asc' ? [item1, item2] : [item2, item1];
	}

	const showLiteGlobalSwitch = () => {
		let toState = getOpt().global_switch === OPT_SWITCH_OFF ? OPT_SWITCH_ON : OPT_SWITCH_OFF;
		let btn = createNode(`<span class="lite-global-switch" data-state="${toState}" title="${toState === OPT_SWITCH_ON ? '开启' : '关闭'}目录美化功能">
					<svg t="1703491864663" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7162" width="48" height="48"><path d="M0 0m136.533333 0l750.933334 0q136.533333 0 136.533333 136.533333l0 750.933334q0 136.533333-136.533333 136.533333l-750.933334 0q-136.533333 0-136.533333-136.533333l0-750.933334q0-136.533333 136.533333-136.533333Z" fill="#30384F" p-id="7163"></path><path d="M458.533547 324.07552l-80.554667-10.704213-36.0448-66.60096-36.099413 66.60096-80.554667 10.704213 58.272427 51.882667-13.666987 73.23648 72.04864-34.57024 72.04864 34.57024-13.735253-73.23648z" fill="#59554A" p-id="7164"></path><path d="M799.061333 782.336l-66.628266 39.1168c-12.588373 7.386453-22.89664-0.300373-22.89664-17.08032v-78.506667a51.514027 51.514027 0 0 1 23.442773-42.51648l65.536-33.50528c12.9024-6.608213 23.442773 1.733973 23.442773 18.51392v70.014294a55.66464 55.66464 0 0 1-22.89664 43.963733z m-2.921813-144.861867L726.357333 674.474667a56.661333 56.661333 0 0 1-47.22688 0l-72.21248-38.229334a13.312 13.312 0 0 1-0.2048-25.613653l67.447467-37.860693a54.613333 54.613333 0 0 1 47.02208-0.546134l74.943147 40.05888a12.970667 12.970667 0 0 1 0.013653 25.1904z m-116.381013-117.650773l-26.815147-30.037333-39.908693 5.010773 20.261546-34.679467-17.134933-36.427093 39.335253 8.56064 29.354667-27.538773 4.027733 40.045226 35.26656 19.401387-36.864 16.192853z m21.722453-167.44448L669.682347 327.68l-38.393174 12.151467 13.653334-37.84704-23.415467-32.768 40.22272 1.365333 23.906987-32.385707 11.18208 38.66624 38.229333 12.724907-33.286827 22.555307zM353.621333 790.801067a39.840427 39.840427 0 0 1-55.05024 10.390186l-17.312426-11.851093a39.594667 39.594667 0 0 1-10.390187-54.872747l213.947733-312.456533a39.826773 39.826773 0 0 1 55.05024-10.390187l17.353387 11.83744a39.594667 39.594667 0 0 1 10.36288 54.8864z m187.419307-343.927467l-14.158507-9.557333-3.140266-2.184534a11.004587 11.004587 0 0 0-15.428267 2.90816L480.13312 479.232l35.607893 24.234667 28.166827-41.178454a11.18208 11.18208 0 0 0-2.894507-15.428266z m9.038507-123.767467l-19.8656-3.249493-13.953707 14.513493-3.044693-19.879253-18.077014-8.833707 17.98144-9.05216 2.730667-19.879253 14.158507 14.29504 19.810986-3.536213-9.216 17.885866z m-108.270934 105.608534l-100.88448-19.797334-73.5232 71.857494-12.288-102.004054-91.067733-47.7184 93.252267-43.29472 17.271466-101.321386 69.986987 75.28448 101.730987-14.90944-50.025814 89.770666z m-22.28224-164.345174l-80.24064 12.77952-53.602986-53.507413-15.48288 74.1376-74.1376 33.286827 70.683306 33.041066 7.7824 74.069334 59.159894-53.73952 78.92992 12.520106-34.133334-66.259626zM604.678827 649.6256l65.194666 32.058027a50.681173 50.681173 0 0 1 23.606614 42.420906v79.694507c0 16.930133-10.40384 24.94464-23.087787 17.749333l-66.218667-37.382826a54.6816 54.6816 0 0 1-23.087786-43.854507V668.8768c-0.013653-16.971093 10.622293-25.627307 23.59296-19.2512zM791.893333 955.733333v-27.306666h109.226667v-13.653334h-13.653333v-13.653333h-13.653334v-13.653333h-13.653333v-13.653334h-13.653333v-13.653333h-13.653334v-13.653333h-13.653333v-13.653334h-13.653333v-13.653333h-13.653334v-13.653333h13.653334v-13.653334h13.653333v13.653334h13.653333v13.653333h13.653334v13.653333h13.653333v13.653334h13.653333v13.653333h13.653334v13.653333h13.653333v13.653334h13.653333v13.653333h13.653334v-109.226667h27.306666v163.84H791.893333z m70.314667-68.266666zM860.16 887.466667z" fill="#FFC738" p-id="7165"></path></svg>
					</span>`, document.body);
		btn.addEventListener('click', e => {
			setOpt('global_switch', toState);
			location.reload();
		});
	};

	(() => {
		if(!isIndex()){
			return;
		}
		showLiteGlobalSwitch();
		if(getOpt().global_switch === OPT_SWITCH_OFF){
			return;
		}

		q('#style').type = 'text/css';
		let h1 = q('h1');
		let pre = q('pre');
		let k;

		let PATH_TITLE = h1.innerText.replace(/^\s*index\s*of\s/i, '');
		let current_opt = getOpt();
		let sort_menu_html = '';
		for(k in SORT_TYPES){
			sort_menu_html += `<li><label><input type="radio" name="sort_type" ${current_opt.sort_type === k ? 'checked' : ''} value="${k}">${SORT_TYPES[k]}</label></li>`;
		}
		sort_menu_html += `<li class="sep"></li>`;
		for(k in SORT_DIRS){
			sort_menu_html += `<li><label><input type="radio" value="${k}" name="sort_dir" ${current_opt.sort_dir === k ? 'checked' : ''}>${SORT_DIRS[k]}</label></li>`;
		}
		let view_menu_html = '';
		for(k in VIEW_MODES){
			view_menu_html += `<li><label><input type="radio" value="${k}" name="view_mode" ${current_opt.view_mode === k ? 'checked' : ''}>${VIEW_MODES[k]}</label></li>`;
		}
		let opt_dom = createNode(
			`<div class="top-bar">
				<div class="paths">${buildPathLink(PATH_TITLE)}</div>
				<div class="operation">
					<div class="opt-item">
						${SORT_ICON_SVG}
						<ul class="menu">${sort_menu_html}</ul>
					</div>
					<div class="opt-item">
						${OPTION_ICON}
						<ul class="menu">${view_menu_html}</ul>
					</div>
				</div>
			</div>`);
		document.body.insertBefore(opt_dom, h1);

		opt_dom.querySelectorAll('input[type=radio]').forEach(chk => {
			chk.addEventListener('change', e => {
				setOpt(chk.name, chk.value);
				location.reload();
			});
		})

		rm(h1);

		let FILE_ITEMS = (() => {
			let items = [];
			pre.innerHTML.split("\n").forEach(line => {
				line = line.trim();
				if(!line.length){
					return;
				}
				let tmp, link, title, LastModified = '', fileAttr, size, SizeText, dir, parent = false;
				tmp = /<a\s*href="(.*)">([^<]+)<\/a>/.exec(line);
				link = tmp[1];
				title = tmp[2];

				tmp = /<\/a>\s+(\S+\s\S+)\s+(\S+)/ig.exec(line);
				if(!tmp){
					return; //ignore parent dir
				}
				LastModified = dateFormat(tmp[1].trim());
				fileAttr = tmp[2].trim();
				dir = isDir(fileAttr);
				size = convertSize(fileAttr);
				SizeText = size.toString() === fileAttr ? size + 'B' : fileAttr;
				if(dir){
					title = title.replace(new RegExp('\\/$', 'g'), '');
				}
				items.push({
					link,
					parent,
					title,
					LastModified,
					size,
					SizeText,
					dir
				})
			});
			return items;
		})();

		//sort
		let current_sort_type = getOpt().sort_type;
		let current_sort_dir = getOpt().sort_dir;
		switch(current_sort_type){
			case 'type':
				FILE_ITEMS.sort((item1, item2) => {
					if(item1.dir ^ item2.dir){
						[item1, item2] = swap(item1, item2, current_sort_dir);
						return (item1.dir && !item2.dir) ? -1 : 1;
					}else{
						return 0;
					}
				});
				break;
			case 'size':
				FILE_ITEMS.sort((item1, item2) => {
					[item1, item2] = swap(item1, item2, current_sort_dir);
					return item1.size - item2.size;
				});
				break;
			case 'name':
				FILE_ITEMS.sort((item1, item2) => {
					[item1, item2] = swap(item1, item2, current_sort_dir);
					return item1.title.localeCompare(item2.title);
				});
			case 'date':
				FILE_ITEMS.sort((item1, item2) => {
					[item1, item2] = swap(item1, item2, current_sort_dir);
					return new Date(item1.LastModified).getTime() - new Date(item2.LastModified).getTime();
				});
			default:
				let first_is_dir = FILE_ITEMS[0].dir;
				FILE_ITEMS.sort((item1, item2) => {
					if(item1.dir ^ item2.dir){
						if(first_is_dir){
							return (item1.dir && !item2.dir) ? -1 : 1;
						}else{
							return (item1.dir && !item2.dir) ? 1 : -1;
						}
					}else{
						return 0;
					}
				});
		}

		//push parent dir
		FILE_ITEMS.unshift({
			link: '../',
			parent: true,
			title: '上一级',
			LastModified: '',
			size: '',
			SizeText: '',
			dir: true,
		});

		let listHtml = '';
		FILE_ITEMS.forEach(item => {
			let icon = '';
			let ext = item.dir ? '' : resolveExt(item.title);
			if(item.parent){
				icon = FOLD_PARENT;
			}else if(item.dir){
				icon = FOLD_SVG;
			}else if(isImg(item.title)){
				icon = `<img loading="lazy" src="${item.link}">`;
			}else{
				icon = FILE_SVG;
			}
			listHtml += `<li
				data-type="${item.dir ? 'dir' : 'file'}" ${item.parent ? 'data-parent' : ''}
				${ext.length ? `data-ext="${ext}"` : ''}
				style="--ext:'${ext}'">
		<a href="${item.link}" title="${item.title}">
			<span class="thumb">${icon}</span>
			<span class="title" data-text="${item.title}">${item.title}</span>
			<span class="last-modified">${item.LastModified}</span>
			<span class="size">${item.SizeText}</span>
		</a>
		</li>`;
		});

		let ListNode = createNode(`<ul class="file-list">${listHtml}</ul>`);
		document.body.insertBefore(ListNode, pre);
		rm(pre);
		qs('hr').forEach(hr => {
			rm(hr);
		});

		ListNode.setAttribute('data-view_mode', getOpt().view_mode);
		window.addEventListener('storage', e => {
			console.log('storage change', e);
			if(e.key === OPT_KEY){
				let opts = getOpt();
				for(let k in opts){
					ListNode.setAttribute('data-' + k, opts[k]);
				}
			}
		})

		const searchForm = createNode(`<div class="kw-search-frm" style="display:none;"><input type="search" placeholder="搜索当前页···"></div>`, document.body);
		const searchInput = searchForm.querySelector('input[type=search]');

		let searchTm = null;
		const searchText = () => {
			searchTm && clearTimeout(searchTm);
			searchTm = setTimeout(() => {
				let kw = searchInput.value.trim();
				console.log('searching kw:', kw);
				let firstMatchedLink;
				let unmatchedTabindex = ListNode.children.length;
				let tabIndex = 1;
				ListNode.querySelectorAll('.title').forEach(titleEl => {
					titleEl.parentNode.tabIndex = unmatchedTabindex;
					if(!kw.length){
						titleEl.innerHTML = titleEl.dataset.text;
						return;
					}
					let [html, matched] = highlightText(titleEl.dataset.text, kw);
					titleEl.innerHTML = html;
					if(matched){
						titleEl.parentNode.tabIndex = tabIndex++;
					}
					if(matched && !firstMatchedLink){
						firstMatchedLink = titleEl.parentNode;
					}
				})
				firstMatchedLink && firstMatchedLink.focus();
				searchTm = null;
			}, 10);
		}

		searchInput.addEventListener('input', searchText, false);
		document.body.addEventListener('keydown', e => {
			if(e.code === 'Escape'){
				searchForm.style.display = 'none';
				searchInput.value = '';
				return;
			}
			if(e.target === searchInput){
				return;
			}
			if(e.ctrlKey || e.altKey){
				return;
			}
			if(e.code === 'Backspace'){
				if(!searchInput.value.length){
					searchForm.style.display = 'none';
					return;
				}
				searchInput.value = searchInput.value.substring(searchInput.value.length - 1, searchInput.value);
			}
			if(keyVisible(e.keyCode)){
				searchForm.style.display = '';
				searchInput.value = searchInput.value + e.key;
				searchText();
			}
		});

		document.body.addEventListener('click', e => {
			if(searchInput.value.trim().length === 0 && e.target !== searchInput && e.target !== searchForm){
				searchForm.style.display = 'none';
			}
		});
	})();
</script>